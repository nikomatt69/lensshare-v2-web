var w=Object.defineProperty;var m=(s,e,t)=>e in s?w(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>(m(s,typeof e!="symbol"?e+"":e,t),t);var r=["/walletconnect.svg","/favicon-16x16.png","/music/calm_my_mind.mp3","/music/forest_lullaby.mp3","/music/cradle_of_soul.mp3","/icon.png","/favicon.ico","/apple-touch-icon.png","/images/favicon-16x16.png","/images/icon.png","/images/Lenssharelogo.png","/images/Lenstoknewlogo34.png","/images/brands/x-dark.svg","/images/brands/x-light.svg","/images/source/lensshare.jpg","/images/source/orb.jpg","/images/source/buttrfly.jpg","/images/source/tape.jpg","/images/source/hey.jpg","/images/source/phaver.jpg","/images/source/lenster.jpg","/images/Lenstoklogo.png","/images/Lenstoklogo2.png","/images/sound.png","/images/default-avatar.svg","/images/social/ens.svg","/images/social/worldcoin.png","/images/social/sybil.png","/images/social/x.svg","/images/social/poh.png","/images/social/reddit-logo.png","/images/social/lenster.png","/images/social/ENS-Ethereum-Name-Service.svg","/images/social/twitter.png","/images/social/linkedin.png","/images/social/twitter.svg","/images/splash.png","/images/camera-video.svg","/images/Lenstoknewlogo.png","/images/Lenstoknewlogo5.png","/images/chains/polygon.svg","/images/chains/ethereum.svg","/images/chains/zora.png","/images/chains/base.svg","/images/faviconok.png","/images/Lenstoknewlogo3.png","/images/tokens/usdc.svg","/images/tokens/dai.svg","/images/tokens/wmatic.svg","/images/tokens/bct.svg","/images/tokens/bonsai.svg","/images/tokens/nct.svg","/images/tokens/bonsaikkk.svg","/images/tokens/weth.svg","/.well-known/security.txt","/lens.svg","/icon copy.png","/push/addfriend.svg","/push/videobtndarkmode.svg","/push/micoffbtn.svg","/push/MinusCircle.svg","/push/lock.svg","/push/Shield.svg","/push/emoji.svg","/push/creategroup.svg","/push/requestchat.svg","/push/gif.svg","/push/gitIcon.svg","/push/callacceptbtn.svg","/push/CheckCircle.svg","/push/dismissadmin.svg","/push/deprecated.svg","/push/createmessage.svg","/push/send.svg","/push/more.svg","/push/miconbtn.svg","/push/uploadImage.svg","/push/callendbtn.svg","/push/cameraonbtn.svg","/push/video.svg","/push/cameraoffbtn.svg","/logo.png","/coinbase.svg","/icon-512x512.png","/t.png","/5.png","/robots.txt","/fonts/SofiaProSoftBold-webfont.woff2","/fonts/SofiaProSoftMed-webfont.woff2","/fonts/Helvetica.ttf","/fonts/helvetica-rounded-bold-5871d05ead8de.ttf","/fonts/Helvetica-Bold.ttf","/fonts/SofiaProSoftReg-webfont.woff2","/dynamic.svg","/assets/type-code.svg","/assets/type-italic.svg","/assets/type-bold.svg","/2.png","/pride.png","/favicon-32x32.png","/icon-128x128.png"];var S="75abd47",n=class{constructor({cachePrefix:e,staticAssets:t,cacheableRoutes:a,withQueryParams:c}){i(this,"cacheName");i(this,"cachePrefix");i(this,"staticAssets");i(this,"cacheableRoutes");i(this,"withQueryParams");i(this,"cacheStaticAsset",(e,t)=>{fetch(e).then(a=>{if([200,304].includes(a.status))t.put(e,a).catch(c=>{console.debug(`Failed to cache file - ${e}`,c),console.debug(`Failed to cache file - ${e}`,c)});else throw new Error("Failed to fetch from local")}).catch(console.debug)});i(this,"cacheStaticAssets",async()=>{let e=await caches.open(this.cacheName);for(let t of this.staticAssets)this.cacheStaticAsset(t,e)});i(this,"invalidatePreviousCache",async()=>{let e=await caches.keys();await Promise.all(e.filter(t=>t.startsWith(this.cachePrefix)).map(async t=>t!==this.cacheName?await caches.delete(t):await Promise.resolve(!1)))});i(this,"put",async(e,t)=>{let a=await fetch(e,{cache:"reload"});!a.redirected&&[200,304].includes(a.status)?await t.put(e,a):await t.delete(e)});i(this,"get",async e=>{let{request:t}=e,{pathname:a,search:c}=new URL(t.url),d=`${a}${this.withQueryParams?c:""}`;if((this.staticAssets.has(a)||this.cacheableRoutes.has(a))&&this.cacheName){let u=await caches.open(this.cacheName),f=await u.match(d);if(navigator.onLine&&e.waitUntil(this.put(d,u)),f)return f}return await fetch(t)});this.cachePrefix=e,this.cacheName=`${e}_${S}`,this.staticAssets=new Set(t),this.cacheableRoutes=new Set(a),this.withQueryParams=c??!0}};var g="https://mycrumbs.xyz/api/leafwatch/impressions",v=5e3,o=null,h=new Set,A=()=>{let s=Array.from(h);s.length>0&&o&&(h.clear(),fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({viewer_id:o,ids:s}),keepalive:!0}).then(()=>{}).catch(()=>{}))},b=r??[],P=["/","/contact","/explore","/messages"],p=["https://static-asset.mycrumbs.xyz","https://asset.mycrumbs.xyz","https://prerender.mycrumbs.xyz"],l=new n({cachePrefix:"SWCache",cacheableRoutes:[...P,...p],staticAssets:b});async function C(){self.skipWaiting(),await l.cacheStaticAssets()}var E=async()=>{await self.clients.claim(),await l.invalidatePreviousCache()},I=s=>{let e=s.request.clone(),{origin:t}=new URL(e.url);(self.location.origin===t||p.includes(t))&&s.respondWith(l.get(s))};self.addEventListener("message",s=>{s.data&&s.data.type==="PUBLICATION_VISIBLE"&&(h.add(s.data.id),o=s.data.viewerId)});setInterval(A,v);self.addEventListener("fetch",I);self.addEventListener("install",s=>s.waitUntil(C()));self.addEventListener("activate",s=>s.waitUntil(E()));
