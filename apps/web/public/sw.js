var s="https://lenshareapp.xyz/api/leafwatch/impressions";var e=null,n=new Set,a=()=>{let i=Array.from(n);i.length>0&&e&&(n.clear(),fetch(s,{body:JSON.stringify({ids:i,viewer_id:e}),headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST"}).then(()=>{}).catch(()=>{}))},c=async()=>{await self.clients.claim()};function l(){let i="LensShare",o={body:"New Notification",icon:"/icons/icon-192x192.png"};new Notification(i,o)}l();"setAppBadge"in navigator&&navigator.setAppBadge(1);self.addEventListener("message",i=>{i.data&&i.data.type==="PUBLICATION_VISIBLE"&&(n.add(i.data.id),e=i.data.viewerId)});self.addEventListener("push",i=>{i.waitUntil(self.registration.showNotification("LensShare",{body:"New Notification",icon:"/icons/icon-192x192.png"}))});self.addEventListener("push",i=>{let t=i.data?.json();self.registration.showNotification(t.title,{body:t.message,icon:"/icons/icon-192x192.png"})});self.addEventListener("activate",i=>i.waitUntil(c()));setInterval(a,5e3);
