var s="https://api.mycrumbs.xyz/leafwatch/impressions";var e=null,t=new Set,a=()=>{let i=Array.from(t);i.length>0&&e&&(t.clear(),fetch(s,{body:JSON.stringify({ids:i,viewer_id:e}),headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST"}).then(()=>{}).catch(()=>{}))};setInterval(a,5e3);var n=async()=>{await self.clients.claim()};self.addEventListener("message",i=>{i.data&&i.data.type==="PUBLICATION_VISIBLE"&&(t.add(i.data.id),e=i.data.viewerId)});self.addEventListener("push",i=>{i.waitUntil(self.registration.showNotification("MyCrumbs",{body:"New Notification",icon:"public/icon.png"}))});self.addEventListener("activate",i=>i.waitUntil(n()));
